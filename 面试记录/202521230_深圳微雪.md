# 笔试+面试  

## 笔试题  

```
考核基础知识    （共50分）
1. #define N 5    #define Y(n) (N*n)    表达式Y(2+1)的值是___11___？（3分）
2. 三目运算int a = 100, b; b = a ? 20 : 60;则b的值为多少？（4分）20
3. 小端模式，uint16_t Number = 0x1234;则((uint8_t *)(&Number))[0]的值为__0x34____？（4分）
4. 以下代码的运行结果是什么？（5分）15   
#include <stdio.h>
#define offsetof(TYPE, MEMBER) ((size_t) &((TYPE *)0)->MEMBER)
struct exp 
{
char count[15];
char temp;
};
void main(void)
{
printf("%d\n", offsetof(struct exp, temp));
}
/*解析：
1.  0转换为指针类型为地址0x00(NULL)
2.  ->优先级高于&，实际是取0x00 开始的struct exp结构体的temp成员的地址，再转换为(size_t)类型
*/


5.现有hello.cpp文件，依赖于库pthread，请使用g++命令编译生成可执行文件hello。（5分）
    g++ -o hello hello.cpp -lpthread
6.在shell编程中，执行source script.sh和/bin/bash script.sh的差别是什么？（5分）
source script.sh
（1）在当前shell环境中执行脚本 （2）脚本中的变量、函数等会影响当前shell会话
（3）脚本执行完后，其定义的变量和环境变更会保留在当前shell中

/bin/bash script.sh
（1）启动一个新的bash进程来执行脚本 （2）脚本在子shell中运行，不会影响当前shell环境
（3）脚本中的变量和环境变更在子shell结束后不会影响原shell


7.有两个系统A和B，它们通过串口进行通信，在上电后发现，系统B无法接收到A发送的数据，简述你分析故障的方法。（8分）
1.检测波特率或其他串口参数有没有配置对
2.使用minicom 或cat 检测对应的串口设备 如/dev/ttyS1
3.使用万用表量有没有电平变化；使用示波器或逻辑分析仪抓波形
8. 简述你对以下接口/总线的认识，包括它们在硬件上构造，软件上的特点，及优缺点 （每个4分，共16分）
   UART     I2C     SPI     CAN

UART ： 硬件上有TX、RX,电平一般是TTL 3.3V，对端设备TX接RX;协议上，空闲为高电平，拉低为起始，1位拉		低，接着5~9位数据位，可选1位校验位，和1~2位停止位（拉高），这里的一位的时间的倒数就是波特		率；软件上，有接收中断，会触发UART控制器去接收数据。
优点：简单，通用  		缺点：只能接一个设备且距离短
I2C ： 硬件上 有SDA和SCL，电平一般为 1.8或3.3V ,对端设备SDA接SDA，SCL接SCL，可以一主多从，需要		发送从机的器件地址;协议上，I2C有特定的启动和停止动作，有应答机制，一般8位数据，1位ACK			（拉低应答）；
优点：省接口，可以接多个设备		缺点：距离短

SPI ; 硬件上有 MISO、MOSI、CS、SCL。根据电平极性和时钟相位分为四种模式。
优点：比I2c快，传输快		缺点：距离短，线路多
CAN：	硬件上，多个设备共用一条总线，差分，H接H，L接L；发数据时只用把接收端地址放在报文头；
优点：传输距离远，通信设备多		缺点：数据少






考核综合能力   （共40分）
8.有一段英文语句，比如"How are you feeling today"，把它完全倒装过来，"today feeling you are How"，简述如何不使用额外的存储空间完成这个倒装过程？（满分10分）
Void  fun8(char * str,int count)
{
While((count--)/2 >0)
{
 	Str[0]=str[0]+str[count-1];
Str[count-1]=str[0]-str[count-1];
Str[0]=str[0]-str[count-1];
}
}

10. memcpy是内存拷贝函数，按你对memcpy的理解，使用C语言写出具体的实现方法。（满分10分）
void memcpy (char * dec,char n,int count )
{
Char *p =dec;
While(count-- !=0 && *p! = “\0”)
{
*p++=n
}
}

11. 简述SoC启动linux系统的启动流程。（满分10分）
BOOTROM：芯片固化程序，上电后根据寄存器选择启动的设备（如emmc.flash、sd、nvme等）；将bootloader的			spl在sram运行，初始化内存；将程序复制到内存；
BOOTLOADER：通常是uboot,在内存中运行（ddr）,初始化时钟、内存、网络；加载内核镜像，设备树（dtb）;
设置启动内核的参数 bootargs（控制台，根文件系统（nfsrootfs或initramfs）等）；启动内核
KERNEL: 初始化 虚拟内存，页表等；初始化进程调度，内存管理等子系统；解析设备树，加载驱动；将控制权移		交用户空间
USERSPACE: /etc/init等；加载一些开机配置

12. 简述在Android系统中，开发一个用来控制RGB LED应用程序的开发流程。（满分10分）
Kernel ：打通硬件
Hal ：提供控制RGB的API 
Freamwork ： 传递，完善这个API
APP ： 调用接口


考核分析能力   （共10分）
13.  1， 8， 9， 64， 25， 87__求横线位置的整数（5分）
14. 下图星星的个数只可能是？  （5分）
A.142    B.143    C.144    D.145
请说明原因。（提示：只选择无效；只采用“计数-累加”方法得出的，无效；采用排除法才可获得满分）
1. ☆☆☆★☆☆★☆★☆☆★☆☆☆★ 
2. ☆☆☆★☆☆★☆★☆☆★☆☆☆★
3. ☆☆☆★☆☆★☆★☆☆★☆☆☆★
4. ☆☆☆★☆☆★☆★☆☆★			
5. ☆☆☆★☆☆★☆★☆☆★
6. ☆☆☆★☆☆★☆★☆☆★
7. ☆☆☆★☆☆★☆★
8. ☆☆☆★☆☆★☆★
9. ☆☆☆★☆☆★☆★
10. ☆☆☆★☆☆★
11. ☆☆☆★☆☆★
12. ☆☆☆★☆☆★
13. ☆☆☆★
14. ☆☆☆★
15. ☆☆☆★
```